# Operation test
こちらはsekimenの動作テスト用の資料です。

ファームウェア書込み環境を構築し、キーボードの動作を確認するまでの手順が記載されています。

キーボード組立中の動作確認等にご活用ください。

# ファームウェアの書込み環境の構築

ファームウェア書込み環境構築のため、

https://docs.qmk.fm/#/ja/newbs_getting_started

や、
https://qiita.com/cactusman/items/ac41993d1682c6d8a12e
を参考に、MSYS2等のコマンドライン環境用のソフトウェア及びgitをインストールします。

(ページの作成者にこの場を借りて感謝致します。)


インストール後、任意の名前の作業用フォルダを一つ作成します。(出来れば英語のファイル名が良いです。github_workとか)
フォルダ作成後、作成したフォルダのフルパスを控えておきます。
その後、MSYS2等を起動します。
起動後、次のコマンドを入力し、Enterキーを押します。


そうすると、先ほど作成したフォルダの中へ移動できます。
ここがフォルダのパスと一致していたらOKです。

移動後、以下のコマンドをそれぞれ入力し、Enterキーを押します。

git clone --recurse-submodules https://github.com/qmk/qmk_firmware.git

cd qmk_firmware

そうすると、ファームウェア書込みに使用するフォルダの中へ移動できます。



移動が完了したら、左右いずれかのpro_mircroの取付けまで完了したキーボードのpro_microとPC間をUSBケーブル(通信可能なもの)で接続します。

接続後、以下のコマンドを入力し、Enterキーを押します。

make sekimen:default:avrdude
(メモ：githubに置くファームウェアは5列タイプにしておく。拡張基板の取付時に7列に変更する。
 組立が終われば自然に知識が増える)

すると、ファームウェアの書込みが開始されます。

ファームウェアの書込み開始後しばらくすると、画像のような状態になります。

(リセット待機中の画像)

その状態で、キーボードのリセットスイッチを押します。

そうすると画面の状態が変わります。

〇〇が表示されたら、ファームウェアの書込みは完了です。

もう片方のキーボードに対しても同様の手順でファームウェアを書き込みます。

#　左右のキーボードのTRRSケーブルでの接続

左右のキーボードのTRRSジャック間をTRRSケーブルで接続します。

TRRSケーブルは奥まで差し込んでください。

#　左キーボードのpro_microとPC間をUSBケーブルで接続

左キーボードのpro_microとPC間をUSBケーブルで接続します。

#　キーの入力テスト

PCとキーボードを接続した状態で、メモ帳等の文字入力用ソフトウェアを起動し、文字入力が可能な状態にしておきます。

またはキーボードテスター様のサイト
https://www.keyboardtester.com/tester.htmlを使用します。
その後、画像のようにキーボードのキースイッチ端子用の穴同士をショートさせます。
ショートにはピンセットの先端や、スイッチを押した状態のキースイッチを使用すると良いです。
組立が正しく行われていれば、ショートさせた箇所に対応する文字が入力されます。

これを左右キーボードの各キー実装部分に対して行います。

キーの入力に問題が無ければ、動作テストは完了です。







