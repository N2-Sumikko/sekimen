# Build Guide
こちらはsekimenのビルドガイドです。
# 同梱品の確認
以下の部品が揃っていることを確認します。

*   メイン基板キット

|名前|合計数|備考|
|:-|:-|:-|
|メイン基板(左キーボード)|1枚|片面が赤色の基板です。赤くない面にLeft Sideと書いてあります。|
|メイン基板(右キーボード)|1枚|片面が赤色の基板です。赤くない面にRight Sideと書いてあります。|
|トッププレート|2枚|四角い穴の開いた白色の基板です。左右共通です。|
|ボトムプレート|2枚|アクリル製の透明な板です。左右共通です。|
|ProMicroカバー|2枚|アクリル製の透明な小さい板です。左右共通です。|
|ダイオード|46個|表面実装タイプのダイオードです。|
|ピンヘッダ1x8(ロープロファイル）|2個|8ピンの背が低いピンヘッダです。拡張基板未使用時は余ります。|
|ピンソケット1x4(ロープロファイル)|1個|4ピンの背が低いピンソケットです。左キーボードのみに使用します。|
|ピンソケット1x4|2個|4ピンのピンソケットです。|
|ピンソケット1x12|4個|12ピンのピンソケットです。|
|ピンヘッダ1x12|4個|12ピンのピンヘッダです。ProMicroの袋の中に同梱されています。|
|※ピンヘッダ1x4|2個|4ピンのピンヘッダです。OLEDにはんだ付け済みの場合は付属しません。|
|細ピンヘッダ1x3|4個|ピンが細めの3ピンのピンヘッダです。|
|ジャンパピン|4個|内部に金属端子がある、四角い樹脂製の部品です。|
|リセットスイッチ|2個|ボタンがある四角い部品です。|
|TRRSジャック|2個|TRRSケーブルを接続する穴がある四角い部品です。|
|OLED|2個|液晶画面のついた基板です。|
|ProMicro|2個||
|LEDテープ|2枚|LEDが5個並んだテープ状の部品です。|
|M2x7mmスペーサー|8個|銀色の円柱の形をした部品です。|
|M2x12mmスペーサー |4個|銀色の六角柱の形をした部品です。|
|M2x4mmねじ|20本|銀色の長さ4㎜のねじです。|
|M2x10mmねじ|4本|銀色の長さ10mmのねじです。|
|ゴム足|8個|透明なゴム足です。シートに貼り付けてあります。|

*   (拡張キットを使用する場合）拡張キット

|名前|合計数|備考|
|:-|:-|:-|
|拡張基板|1枚|片面が白色の基板です。左右キーボード用の拡張基板が1体になっています。|
|トッププレート|1枚|四角形の穴が開いた白色の基板です。左右キーボード用のトッププレートが1体になっています。|
|ボトムプレート|2枚|アクリル製の透明な板です。左右共通です。|
|ダイオード|20個|表面実装タイプのダイオードです。|
|ピンヘッダ1x8(ロープロファイル)|2個|8ピンの背が低いピンヘッダです。(樹脂部分の高さは1.5mmです。）|
|ジャンパピン|16個|内部に金属端子がある、四角い樹脂製の部品です。|
|M2x7mmスペーサー|4個|銀色の円柱の形をした部品です。|
|M2x4mmねじ|8本|銀色の長さ4㎜のねじです。|
|ゴム足|8個|透明なゴム足です。シートに貼り付けてあります。|


# 別途必要な部品の用意(オプション含む)
以下の部品を用意します。

|名前|合計数|備考|
|:-|:-|:-|
|キースイッチ|46(拡張キット使用時は)66個|Cherry MX互換品が必要です。トラックボール取付キット使用時は使用数が1つ減ります。|
|キーキャップ(1uサイズ)|46(拡張キット使用時は66個)|CherryMX互換品の1uサイズのキーキャップが必要です。トラックボール取付キット使用時は使用数が1つ減ります。|
|TRRSケーブル|1本|左右のキーボード間の接続に使用します。|
|(オプション)Sekimen 拡張キット|1個|キーの数を増やす場合に使用します。同梱品は上に記載しています。|
|(オプション)Sekimen トラックボール取付キット|1個|トラックボールモジュールADTB7Mを取付ける場合に使用します。同梱品、別途必要な部品は[こちら](https://github.com/N2-Sumikko/sekimen/blob/master/doc/trackball_jp.md)をご確認ください。|

# 組立に必要な工具の用意
sekimen組立て時に自分が使用したものを以下に記載します。

* はんだごて

* はんだこて台

* はんだ

* 簡易はんだ吸い取り機(ハッコースッポン 20Gを所持しているのでそちらを使用しました。)

* ピンセット

* マスキングテープ

* 精密ドライバー

* 大き目のクリップ(キースイッチのはんだ付け時に、キースイッチを基板に固定するために使用しました。)

* ニッパー

* 鉄やすり

* 瞬間接着剤(ピンヘッダやピンソケットの取付け時に使用しました。使う場合は部品の樹脂部分に少量だけ塗布(金属部分にはつかないように注意です！！)し、基板に接着します。)

他にも、こちらのサリチル酸様のWebページも非常に参考になるかと思います。(この場を借りて感謝申し上げます。)

[自作キーボードを作るために必要なもの - 自作キーボード温泉街の歩き方](https://salicylic-acid3.hatenablog.com/entry/2018/11/24/%E8%87%AA%E4%BD%9C%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%92%E4%BD%9C%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA%E3%82%82%E3%81%AE)

# 組立時の主な注意点
* ダイオードをはんだ付けする際の向きに注意してください。

* はんだ付け時にキースイッチやピンソケット、ピンヘッダ等の部品が基板から浮かないように注意してください。

* ジャンパピンの取り付け位置に注意してください。

* はんだ付けに自信が無い場合は、はんだ付けする箇所にフラックスを薄く塗布してからはんだ付けしてください。(特にLEDテープのはんだ付け)

# メイン基板の組立て
本ビルドガイドの画像は主に右キーボード用のものです。

左キーボードの組立については、明言している部分(ジャンパピンとロープロファイルピンソケット1x4について）以外は部品の位置が少し異なる程度で右キーボードと同じです。

# ダイオード(表面実装タイプ)のはんだ付け
表面実装タイプのダイオードをはんだ付けします。

はんだ付け時のダイオードの向きは以下の画像の通りです。(sekimenではダイオードの向きは全て同じです。)

<img width="600" alt="無題" src="https://user-images.githubusercontent.com/54104281/87245239-c4820480-c47e-11ea-88a7-65465427039a.png">

まず、ダイオード実装用の2つのパッドのうち片方にはんだのみをはんだ付けします。(予備はんだと言います。)

<img width="600" alt="予備はんだ後" src="https://user-images.githubusercontent.com/54104281/87247558-69a4d900-c48f-11ea-9dcd-7d9df90f368c.png">

次に、ダイオードをピンセット等でつまみ、ダイオードの足を2つのパッドの横あたりに置きます。

<img width="600" alt="ダイオード位置調整" src="https://user-images.githubusercontent.com/54104281/87407495-354f2b00-c5fd-11ea-919e-70600172d83b.png">

その後ピンセットでダイオードを持ちながら、予備はんだにはんだごてを当てます。

そうすると予備はんだが溶けるので、ダイオードをスライドさせ、ダイオードの足がパッドの上に来るように位置を調整します。

調整が終わったらはんだごてをはんだから離します。

<img width="600" alt="片側パッドはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87407583-56b01700-c5fd-11ea-8925-11ddacf75de0.png">

片側の足が固定されたら、ダイオードのもう片方の足とパッドをはんだづけします。

<img width="600" alt="ダイオードはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87407806-9e36a300-c5fd-11ea-9731-be97f6ccba0d.png">

この作業を右キーボードで23個、左キーボードで23個、合計46個分行います。

<img width="600" alt="全ダイオードはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87407963-d1793200-c5fd-11ea-9df4-4359d3c1145a.png">

# OLED部分のはんだジャンパ(ver1.02まで）
OLED用のパッド4箇所のはんだジャンパ(はんだでパッド同士を繋ぐ)をします。ver1.03以降の基板では不要です。

まず、任意の1箇所のパッドの両側に予備はんだをします。(隣のパッドにはんだが付きそうで不安な時は、隣のパッドの上にマスキングテープ等を貼るとよいです。)

<img width="600" alt="OLEDパッド予備はんだ後" src="https://user-images.githubusercontent.com/54104281/87408305-40ef2180-c5fe-11ea-9759-d8edf5500395.png">

その後、予備はんだを用いてパッド同士を繋ぐようにはんだ付けします。

<img width="600" alt="OLEDパッドはんだジャンパ後" src="https://user-images.githubusercontent.com/54104281/87408441-6da33900-c5fe-11ea-9c12-3a466bbf30f5.png">

同様に残りの3箇所もはんだジャンパをします。

# TRRSジャックのはんだ付け

写真のように、基板にTRRSジャックを取付け、はんだ付けします。

まずはTRRSジャックを基板に取付けます。TRRSジャックの突起と基板の穴の位置を合わせます。

<img width="600" alt="TRRSジャック取付後表面" src="https://user-images.githubusercontent.com/54104281/87408852-0cc83080-c5ff-11ea-9de1-d42667e5fe1c.png">

取付後、TRRSジャックの端子4つをはんだ付けします。

<img width="600" alt="TRRSジャックはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87408953-36815780-c5ff-11ea-9381-7cbb33b566cb.png">

# ピンソケット1x12　2つのはんだ付け

写真のように、ピンソケット1x12 2つを基板に対してなるべく垂直に取付け、はんだ付けします。

<img width="600" alt="ピンソケット1x12取付後表面" src="https://user-images.githubusercontent.com/54104281/87409393-d63ee580-c5ff-11ea-882a-863ad8bc0966.png">

まずは1つのピンソケットを基板に取付けます。ピンソケットは取付けるだけでは固定されないので、マスキングテープ等で基板に固定すると良いです。

その後、12個の端子のうち1つをはんだ付けします。

<img width="600" alt="ピンソケット1x12_1ピンはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87409575-143c0980-c600-11ea-85d5-183e0d3ad9e9.png">

そうするとピンソケットが基板にある程度固定されるので、その状態でピンソケットの高さや角度に問題がないかをチェックします。

例えば以下の画像では、画像左側のピンソケットが少し浮いています。このような場合は、はんだを溶かしながら高さや角度を調節します。(調整時ははんだごてや基板、部品の持ち方が不自然になりがちなので、やけどにご注意ください。)

もしはんだ付け後にピンソケットの高さや角度が悪いことに気づいた場合は、使用上問題無い場合もありますので先の手順に進んでみてください。ダメな場合は動作テスト時に分かると思います。

<img width="600" alt="ピンソケット1x12_部品が浮いている例" src="https://user-images.githubusercontent.com/54104281/87410429-41d58280-c601-11ea-8fa4-8a8355dac6f8.png">

ピンソケットの高さや角度に問題が無ければ、残りの端子をはんだ付けします。

同様の手順でもう1つのピンソケット1x12もはんだ付けします。

<img width="600" alt="ピンソケット1x12はんだ付け後" src="https://user-images.githubusercontent.com/54104281/87409968-ae03b680-c600-11ea-8d1b-bd9917c2800f.png">

# リセットスイッチのはんだ付け

リセットスイッチを基板に奥まで取付けます。リセットスイッチに向きはありません。

<img width="600" alt="リセットスイッチ取付後表面" src="https://user-images.githubusercontent.com/54104281/87539306-98fa5680-c6d8-11ea-8823-6b6244694107.png">

取付後、リセットスイッチの端子2つをはんだ付けします。必要なはんだの量はTRRSジャックやピンソケットと比べると少し多めです。

<img width="600" alt="リセットスイッチはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87411594-ea381680-c602-11ea-87ad-e262d5cf570e.png">

# ピンヘッダ1x3 2つのはんだ付け
ピンヘッダ1x3 2つをはんだ付けします。

<img width="600" alt="ピンヘッダ取付後_表面" src="https://user-images.githubusercontent.com/54104281/87411175-49e1f200-c602-11ea-95bf-4d5c532bad18.png">

まずは2つのピンヘッダのうち1つを基板に固定します。固定にはやはりマスキングテープ等を使用すると良いです。

その後、ピンヘッダの端子1つを基板へはんだ付けします。

<img width="600" alt="ピンヘッダ1x3_1ピンはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87411774-24a1b380-c603-11ea-8936-d5d1993f6054.png">

はんだ付け後、ピンヘッダの高さや角度に問題が無いことを確認します。

問題が無ければ残りの端子をはんだ付けします。

同様に、もう1つのピンヘッダ1x3もはんだ付けします。

<img width="600" alt="ピンヘッダ1x3_はんだ付け後" src="https://user-images.githubusercontent.com/54104281/87412004-70ecf380-c603-11ea-8f45-cdf68598126f.png">

# ピンソケット1x4のはんだ付け
ピンソケット1x4を取付け、はんだ付けします。

<img width="600" alt="ピンソケット1x4取付後表面" src="https://user-images.githubusercontent.com/54104281/87876335-82bf0400-ca12-11ea-9013-e10ead25dc37.png">

まずはピンソケット1x4を基板に取付け、4つの端子のうち1つをはんだ付けします。その後、ピンソケットの高さや角度をチェックします。

問題が無ければ、残りの端子をはんだ付けします。

<img width="600" alt="ピンソケット1x4はんだ付け後" src="https://user-images.githubusercontent.com/54104281/87412241-c3c6ab00-c603-11ea-8501-71ee64d2473c.png">

# ピンヘッダ1x3へのジャンパピンの取り付け
はんだ付けしたピンヘッダ1x3へジャンパピンを取付けます。

右キーボードでは画像のように取付けます。

<img width="395" alt="シリアル通信時ジャンパピン接続(右)" src="https://user-images.githubusercontent.com/54104281/88445997-895dd900-ce61-11ea-9aac-c0246a95d30a.png">

左キーボードでは画像のように取付けます。

<img width="604" alt="シリアル通信時ジャンパピン接続(左)" src="https://user-images.githubusercontent.com/54104281/88445990-764b0900-ce61-11ea-9cc0-abe279262944.png">

写真を参考に、ジャンパピンの各端子の中心にピンヘッダの端子が入るよう取り付けてください。

# ProMicroへのピンヘッダ1x12 2つのはんだ付け
ProMicroへピンヘッダ1x12 2つを画像のように取付け、はんだ付けします。短い方がProMicro側です。

自作キーボードで良く使用されるコンスルーではなく、ピンヘッダなので注意してください。

<img width="600" alt="promicro_ピンヘッダ1x12はんだ付け後" src="https://user-images.githubusercontent.com/54104281/87413437-44d27200-c605-11ea-8270-798fa447c778.png">

# ピンソケット1x12へのProMicro取付け
画像のように、ピンソケット1x12へProMicroを取付けます。

<img width="600" alt="promicro取付後_表面" src="https://user-images.githubusercontent.com/54104281/87413725-a4c91880-c605-11ea-8a5b-294c45940e1e.png">

# (オプション)左キーボードへのロープロファイルピンソケット1x4の取付(ver1.03以降)

ver1.03以降のバージョンでは、左キーボードのOLEDの左のキーの代わりに、ビット・トレード・ワンのトラックボールモジュールADTB7Mの取付が可能です。

トラックボールを使用する場合、画像のように左キーボードの基板にロープロファイル1x4ピンソケットを取付け、はんだ付けします。(画像は追加予定です。）

# 左右キーボードの入力動作テスト
左右キーボードの入力動作テストはここで行うのがおすすめです。
ただし、sekimenでは右手キーボード単体での動作テストが出来ないので注意してください。(テスタ等での導通確認は可能です。)
動作テストのためには左右のキーボードのProMicro取付けまで完了している必要があります。

ファームウェア書込み環境の構築及びファームウェアの書込み、入力動作テストの手順は以下のリンクに記載しています。

[入力動作テスト](https://github.com/N2-Sumikko/sekimen/blob/master/doc/Oparation_test_jp.md)

# トッププレートへM2x12mmスペーサーの取付け

画像のように、トッププレートへM2x12mmのスペーサー2つをM2x10mmのねじ2本でそれぞれ固定します。左キーボードの場合、トッププレートの向きは画像とは左右逆です。

組立後にスペーサーを取付けるのは難しいので、ここで忘れずに取り付けてください。ねじの長さは10mmですので、間違えないようにしてください。

ただし、トラックボールモジュールを使用する場合は、ここではM2x4mmスペーサーを使用します。その後の手順は以下のリンクをご参考ください。

[トラックボールモジュールの取付け](https://github.com/N2-Sumikko/sekimen/blob/master/doc/trackball_jp.md)

<img width="446" alt="トッププレート_12mmスペーサー取付後" src="https://user-images.githubusercontent.com/54104281/88446764-caf18280-ce67-11ea-98e3-0048bd789bff.png">

# トッププレートの四隅へのキースイッチ取付け
トッププレートの四隅へキースイッチを取付けます。

<img width="600" alt="トッププレート_12mmスペーサー取付後" src="https://user-images.githubusercontent.com/54104281/87538543-571ce080-c6d7-11ea-96c0-621e25bc5b27.png">

# トッププレートの基板への取付け

四隅にキースイッチを取り付けたトッププレートを基板に取付けます。

(場合によっては、トッププレートとピンソケット1x4のクリアランスがきつい事があるかもしれません。トッププレートを押し込めば大丈夫な場合が殆どですが、
 どうしても取付けられない場合はピンソケット1x4の位置を修正するか、トッププレートまたはピンソケット1x4の干渉部分を少し削ってください。)

<img width="600" alt="トッププレート取付後" src="https://user-images.githubusercontent.com/54104281/87538813-d4e0ec00-c6d7-11ea-80d1-317cd6a35286.png">

取付後、基板を裏返し、キースイッチの端子(キースイッチ1つにつき2つ)が基板の穴から出ていることを確認して下さい。

出ていない時は、基板の穴からキースイッチの端子が出るように修正します。（キースイッチの向きが違っていたり、端子が曲がっていたりすることが多いです。）

# 四隅のキースイッチのはんだ付け

トッププレートの四隅へ取り付けたキースイッチをはんだ付けします。残りのキースイッチを取付けてからでも良いです。

キースイッチがなるべく浮かないように、キースイッチを基板に押し付けながらはんだ付けします。

マスキングテープで基板にキースイッチを固定したり、大き目のクリップで基板とキースイッチを挟む等の方法がおすすめです。

端子とパッド間は十分な量のはんだではんだ付けしてください。(画像程度のはんだの量なら大丈夫です。)

<img width="600" alt="四隅キースイッチはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87539129-56d11500-c6d8-11ea-89a3-00f543c8af98.png">

# 残りのキースイッチのトッププレートへの取り付け

残り19個のキースイッチをトッププレートへ取付けます。トラックボールモジュールを使用する場合は、左キーボードのProMicro左のキースイッチは不要です。

取付後、キースイッチの端子が基板の穴から出ていることを確認します。

<img width="600" alt="全キースイッチ取付後" src="https://user-images.githubusercontent.com/54104281/87878736-15ff3600-ca21-11ea-8007-6abd148e20b3.png">

# 残りのキースイッチのはんだ付け

取付けたキースイッチがなるべく浮かないように、キースイッチを基板に押し付けながらはんだ付けします。

ダイオード付近の端子は、ダイオードの足とはんだで繋がらないように注意してください。

<img width="600" alt="全キースイッチはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87539970-ca275680-c6d9-11ea-9666-cbf159803d20.png">

# LEDテープの貼付け(ver1.02までは5㎜幅、ver1.03以降は10mm幅のLEDテープ)

まずはLEDテープ裏面のシールをはがします。

その後、写真のように基板へLEDテープを貼付けます。

<img width="600" alt="LEDテープ貼付後" src="https://user-images.githubusercontent.com/54104281/87540127-15da0000-c6da-11ea-886b-ccc0d9d766d1.png">

LEDテープには向きがありますので、間違えないように注意してください。向きは次の画像をご参考ください。

<img width="600" alt="LEDテープ向き確認用" src="https://user-images.githubusercontent.com/54104281/87541477-4753cb00-c6dc-11ea-9188-7cc88879a2be.png">

# LEDテープのはんだジャンパ
写真のように、LEDテープの端子とパッドをはんだジャンパします。

LEDテープの端子にははんだが乗りにくいので、フラックスを塗ってからのはんだ付けをおすすめします。

(私のはんだ付け能力はフラックス無しでこのはんだジャンパに成功したことが無い程度です。ですのでこの作業時は必ずフラックスを塗っています。)

<img width="600" alt="LEDテープはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87541841-ec6ea380-c6dc-11ea-83f0-f8b248725518.png">

# M2x7mmスペーサー4つの取付け

画像のように、基板の穴へM2x7mmのスペーサー4つを取付けます。(この時点では穴に嵌っているだけの状態です。)

<img width="600" alt="7mmスペーサー取付後" src="https://user-images.githubusercontent.com/54104281/87542038-3d7e9780-c6dd-11ea-9132-1ea5bf9d2ce4.png">

# M2x7mmスペーサー4つのトッププレートへのねじ止め

画像のように、トッププレートとM2x7mmスペーサー4つをM2x4mmのねじ4本でねじ止めします。

<img width="600" alt="7mmスペーサー表面ねじ止め後" src="https://user-images.githubusercontent.com/54104281/87542309-b8e04900-c6dd-11ea-8618-835553f295db.png">

# ボトムプレートのM2x7mmスペーサー4つへのねじ止め

画像のように、保護シールをはがしたアクリルのボトムプレートを、M2x7mmスペーサー4つにM2x4mmねじ4本でねじ止めします。

拡張基板を使用する場合は、この手順は飛ばします。

<img width="600" alt="ボトムプレートねじ止め後" src="https://user-images.githubusercontent.com/54104281/87542534-0bba0080-c6de-11ea-911c-9da7eea1102b.png">

# ボトムプレートへのゴム足の貼付け

画像のように、ボトムプレートの四隅へゴム足を貼付けます。

<img width="600" alt="ゴム足貼付後" src="https://user-images.githubusercontent.com/54104281/87543257-6142dd00-c6df-11ea-87a0-9ce51beb6463.png">

# OLEDのピンソケット1x4への貼付け

画像のように、OLEDをピンソケット1x4へOLEDを取付けます。

もしOLEDにピンヘッダ1x4がはんだ付けされていない場合は、はんだ付けしてから取り付けます。

<img width="600" alt="OLED取付後" src="https://user-images.githubusercontent.com/54104281/87543380-a23af180-c6df-11ea-9477-198b9f3dbe4b.png">

# ProMicroカバーのM2x12mm六角スペーサーへのねじ止め

画像のように、保護シールをはがしたProMicroカバーを、M2x12mm六角スペーサー2つへM2x4mmねじ2本でねじ止めします。

<img width="600" alt="OLEDカバー取付後" src="https://user-images.githubusercontent.com/54104281/87543545-e9c17d80-c6df-11ea-9950-d581300e3428.png">

# キーキャップの取付け

キースイッチへお好みのキーキャップを取付けます。

拡張基板を使用する場合はこの手順は飛ばしても構いません。

# 左右キーボードの入力動作テスト

組立途中と同様に、左右キーボードの入力動作テストを行います。

# メイン基板の完成

入力動作テストに問題が無ければ、メイン基板の組立てはこれで完了です。おつかれさまでした。

拡張基板を使用する場合は、拡張基板の組立に進みます。

# 拡張基板の組立

# 拡張基板の分割

画像のように拡張基板が左右一体になっている場合は、ニッパー等で切り離します。

切り離した部分の断面が基板の凹みより内側にあれば、組立て時に干渉することはありません。

<img width="450" alt="拡張プレートの切り離し" src="https://user-images.githubusercontent.com/54104281/87869049-402c0600-c9d7-11ea-94e0-9cd061b41cef.png">

<img width="450" alt="拡張プレート切り離し後" src="https://user-images.githubusercontent.com/54104281/87869077-97ca7180-c9d7-11ea-99c9-28d38aa675ae.png">

断面が気になる場合は、写真のように鉄やすり等で形を整えます。

(私は写真の鉄やすりを使用しています。鉄やすりで基板を削ると鉄やすりが摩耗するので、専用のものを一本用意しておくことをお勧めします。)

<img width="237" alt="拡張基板断面成形後" src="https://user-images.githubusercontent.com/54104281/87869101-fd1e6280-c9d7-11ea-9192-c6846ebf9bb2.png">

# ダイオード(表面実装タイプ)のはんだ付け

画像のように、拡張基板へダイオード10個(両手分で20個)をはんだ付けします。手順はメイン基板と同じです。

<img width="376" alt="拡張基板ダイオードはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87869150-7e75f500-c9d8-11ea-8c63-cffea18da10f.png">

# ピンヘッダ1x8のはんだ付け

画像のようにピンヘッダ1x8を基板に取付けます。(短い方が基板側です。後の手順で長い方にジャンパピンを取り付けます。間違えないようにしてください。)

<img width="450" alt="拡張基板ピンヘッダ1x8取付後" src="https://user-images.githubusercontent.com/54104281/87869430-c39b2680-c9da-11ea-93dc-79416db92c61.png">

取付後、ピンヘッダの端子8つをはんだ付けします。(はんだ付け完了直後の画像を貼るつもりでしたが、先走って四隅にキースイッチを取付けてしまっています。すみません。)

<img width="450" alt="拡張基板ピンヘッダ1x8はんだ付け後" src="https://user-images.githubusercontent.com/54104281/87869443-d281d900-c9da-11ea-9d7c-5eb232e0d1bb.png">

# トッププレートの四隅へのキースイッチの取付け

拡張基板用トッププレートが左右一体になっている場合は、拡張基板と同様の手順で切り離します。

画像のように、トッププレートの四隅へキースイッチを取付けます。左キーボードの場合、トッププレートの向きは画像とは左右逆になります。

<img width="450" alt="拡張基板トッププレート四隅キースイッチ取付後" src="https://user-images.githubusercontent.com/54104281/87869254-1ecc1980-c9d9-11ea-93fa-41148c20f0fc.png">

# トッププレート四隅のキースイッチを基板にはんだ付け

四隅へキースイッチを取付けた状態のトッププレートを基板へ取付けます。

四隅のキースイッチの端子が基板の穴から正しく出ていることを確認したら、キースイッチが基板からなるべく浮かないようにはんだ付けします。

<img width="450" alt="拡張基板四隅キースイッチはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87869518-63f14b00-c9db-11ea-8d07-03c5d2edcee3.png">

# 残りのキースイッチを基板にはんだ付け

残りのキースイッチを基板に取付け、基板からなるべく浮かないようにはんだ付けします。

キースイッチの四隅に羽根があるものは、後述のジャンパピン取付時にジャンパピンが羽根の部分と干渉する場合があります。

その場合は、あまりやりたくはないのですが、キースイッチの干渉部分をニッパー等で切り取ります。

<img width="450" alt="拡張基板キースイッチはんだ付け後" src="https://user-images.githubusercontent.com/54104281/87869601-04e00600-c9dc-11ea-9913-9ecfb32e4b88.png">

# メイン基板へのピンヘッダ1x8のはんだ付け

まずは写真のようにメイン基板へピンヘッダ1x8を取付けます。(こちらも短い方が基板側ですので注意してください。)

既にキーキャップを取付けている場合は、邪魔な箇所のキーキャップをいったん取外します。

<img width="450" alt="ベース基板ピンヘッダ1x8取付後" src="https://user-images.githubusercontent.com/54104281/87869829-d2cfa380-c9dd-11ea-9d65-a515ca6604ca.png">

<img width="165" alt="ベース基板ピンヘッダ1x8取付拡大写真" src="https://user-images.githubusercontent.com/54104281/87869861-2a6e0f00-c9de-11ea-911b-8cdba93bc365.png">

メイン基板にボトムプレートが取付けられている場合は、ボトムプレート側のM2x4mmねじ4本を緩め、メイン基板からボトムプレートを取外します。

その後、メイン基板へピンへッダ1x8の端子8本をはんだ付けします。

<img width="199" alt="ベース基板ピンヘッダ1x8はんだ付け後拡大写真" src="https://user-images.githubusercontent.com/54104281/87869924-ba13bd80-c9de-11ea-965c-a6c88c61148a.png">

その後、キースイッチやピンヘッダ等のはんだ付けに漏れが無いことを確認しておきます。

# 拡張基板へのM2x7mmスペーサー取付

まず、写真のように拡張基板とメイン基板を配置します。

<img width="600" alt="拡張基板とベース基板配置後" src="https://user-images.githubusercontent.com/54104281/87870156-80dc4d00-c9e0-11ea-8e38-4579d523f9b3.png">

その後、拡張基板へM2x7mmスペーサー2つを取付け、拡張基板のトッププレートにM2x4mmのねじ2本でねじ止めします。

<img width="600" alt="拡張基板M2x7mmスペーサーねじ止め後" src="https://user-images.githubusercontent.com/54104281/87870369-4bd0fa00-c9e2-11ea-8a8e-952c6894f4e1.png">

# ボトムプレートの仮止め

まず、画像を参考に、メイン基板の左側にあるM2x7mmスペーサー2つの位置を変更します。

<img width="600" alt="ベース基板M2x7mmスペーサー位置変更" src="https://user-images.githubusercontent.com/54104281/88449209-f84a2a80-ce7f-11ea-8113-6606f922d8ab.png">

その後、ボトムプレート2枚をM2x7mmスペーサー6つへM2x4㎜ねじ6本で仮止め(部品が脱落しない程度の強さでねじ止め)します。

強度確保のため、大きい方のボトムプレートはメイン基板と拡張基板を繋ぐように取付けます。

仮止め後、写真のようにボトムプレートへゴム足8つを取付けます。(既に取付済みのゴム足がある場合は、残りのゴム足を取付けます。)

<img width="600" alt="ボトムプレートゴム足取付後" src="https://user-images.githubusercontent.com/54104281/87870412-c9950580-c9e2-11ea-8a38-7705f81d302e.png">

# ピンヘッダ1x8へのジャンパピンの取付

画像のように、メイン基板と拡張基板のピンヘッダ1x8の隣り合っている端子間を繋ぐように、ジャンパピン8つを取付けます。

メイン基板と拡張基板の位置があっていない場合は微調整します。(ボトムプレートが仮止め状態なので、若干の位置調整が可能です。)

<img width="600" alt="ジャンパピン8つ取付後" src="https://user-images.githubusercontent.com/54104281/87870767-2d6cfd80-c9e6-11ea-93cc-aa2fcd70ccd7.png">

ジャンパピンは1つずつ、奥まで取り付けられていることを確認しながら取付けます。端子の位置が画像のようになっていれば大丈夫です。

<img width="359" alt="ジャンパピン端子位置確認用" src="https://user-images.githubusercontent.com/54104281/87870825-8b014a00-c9e6-11ea-90d7-248b05d389b7.png">

# M2x4mmねじ6本の本締めと全体的なねじ止め確認

ボトムプレートを仮止めしていたM2x4mmねじ6本を本締めします。併せて、他のねじにも緩みが無いことを確認しておきます。

# (オプション)トッププレート間のはんだ付け

メイン基板と拡張基板の接続強度を上げたい場合は、トッププレートの画像の赤枠で囲んだ箇所にあるスルーホールを、不要なリード部品のリード線等で繋いではんだ付けします。

はんだ付け可能な場所は3箇所ありますが、赤枠で囲んでいない1箇所は予備です。

はんだ付けの際ははんだごてがキースイッチに接触しないよう注意してください。

<img width="600" alt="リード部品取り付け場所" src="https://user-images.githubusercontent.com/54104281/88459231-c613e980-cece-11ea-984d-83c1e957a78d.png">

# キーキャップの取付

キースイッチへお好みのキーキャップを取付けます。

![完成後](https://user-images.githubusercontent.com/54104281/87871346-863e9500-c9ea-11ea-815b-f21ac83e1fd6.png)

# ファームウェアの変更

拡張プレートを使用する場合は、ファームウェア書込み前にsekimenフォルダ内のconfig.hの変更が必要です。

画像の赤枠で示した部分を変更します。

変更前

<img width="528" alt="ファームウェア変更前" src="https://user-images.githubusercontent.com/54104281/88449830-28e09300-ce85-11ea-8ee5-ccf5d559230b.png">

変更後

<img width="528" alt="ファームウェア変更後" src="https://user-images.githubusercontent.com/54104281/88449833-33029180-ce85-11ea-88d9-12b6eb985240.png">

変更後は、再度ファームウェアの書込みを行います。

#  動作確認

2つのキーボード間をTRRSケーブルで接続し、左手側のキーボードのProMicroとPC間をUSBケーブルで繋ぎ、キーボードの動作確認をします。

(メイン基板の入力動作テストは済んでいると思いますので、ここでは、拡張基板部分の入力動作を重点的に確認します。)

動作に問題が無ければ組立ては完了です。おつかれさまでした！

自分に合ったキーマップを見つけたり、キーキャップやOLEDの表示をカスタマイズしたり、楽しいキーボードライフをお過ごしください。
